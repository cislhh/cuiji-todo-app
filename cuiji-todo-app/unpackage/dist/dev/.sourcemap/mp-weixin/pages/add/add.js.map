{"version":3,"file":"add.js","sources":["pages/add/add.vue","../../../software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkL2FkZC52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 页面标题 -->\n    <view class=\"header\">\n      <text class=\"title\">添加任务</text>\n    </view>\n\n    <!-- 表单内容 -->\n    <view class=\"form-container\">\n      <view class=\"form-item\">\n        <text class=\"form-label\">任务标题 *</text>\n        <input\n          v-model=\"taskForm.title\"\n          class=\"form-input\"\n          placeholder=\"请输入任务标题\"\n          maxlength=\"100\"\n        />\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">任务描述</text>\n        <textarea\n          v-model=\"taskForm.description\"\n          class=\"form-textarea\"\n          placeholder=\"请输入任务描述\"\n          maxlength=\"500\"\n        />\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">优先级</text>\n        <picker\n          :value=\"priorityIndex\"\n          :range=\"priorityOptions\"\n          @change=\"onPriorityChange\"\n        >\n          <view class=\"picker-view\">\n            <text>{{ priorityOptions[priorityIndex] }}</text>\n            <text class=\"picker-arrow\">▼</text>\n          </view>\n        </picker>\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">分类</text>\n        <input\n          v-model=\"taskForm.category\"\n          class=\"form-input\"\n          placeholder=\"请输入分类\"\n          maxlength=\"50\"\n        />\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">截止日期</text>\n        <picker mode=\"date\" :value=\"taskForm.dueDate\" @change=\"onDateChange\">\n          <view class=\"picker-view\">\n            <text>{{ taskForm.dueDate || \"选择截止日期\" }}</text>\n            <text class=\"picker-arrow\">▼</text>\n          </view>\n        </picker>\n      </view>\n    </view>\n\n    <!-- 底部按钮 -->\n    <view class=\"footer\">\n      <view class=\"btn cancel-btn\" @click=\"goBack\">\n        <text>取消</text>\n      </view>\n      <view\n        class=\"btn confirm-btn\"\n        @click=\"submitTask\"\n        :class=\"{ disabled: !taskForm.title.trim() }\"\n      >\n        <text>确定</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive } from \"vue\";\n\n// 响应式数据\nconst taskForm = reactive({\n  title: \"\",\n  description: \"\",\n  priority: 2,\n  category: \"默认分类\",\n  dueDate: \"\",\n});\n\n// 优先级选项\nconst priorityOptions = [\"低优先级\", \"中优先级\", \"高优先级\"];\nconst priorityIndex = ref(1); // 默认中优先级\n\n// 优先级选择\nconst onPriorityChange = (e) => {\n  priorityIndex.value = e.detail.value;\n  taskForm.priority = parseInt(e.detail.value) + 1;\n};\n\n// 日期选择\nconst onDateChange = (e) => {\n  taskForm.dueDate = e.detail.value;\n};\n\n// 提交任务\nconst submitTask = async () => {\n  if (!taskForm.title.trim()) {\n    uni.showToast({\n      title: \"请输入任务标题\",\n      icon: \"none\",\n    });\n    return;\n  }\n\n  try {\n    const result = await uniCloud.callFunction({\n      name: \"task-create\",\n      data: {\n        title: taskForm.title,\n        description: taskForm.description,\n        priority: taskForm.priority,\n        category: taskForm.category,\n        dueDate: taskForm.dueDate,\n      },\n    });\n\n    if (result.result.code === 0) {\n      uni.showToast({\n        title: \"任务添加成功\",\n        icon: \"success\",\n      });\n\n      // 延迟跳转，让用户看到成功提示\n      setTimeout(() => {\n        uni.navigateBack();\n      }, 1500);\n    } else {\n      uni.showToast({\n        title: result.result.message || \"添加任务失败\",\n        icon: \"none\",\n      });\n    }\n  } catch (error) {\n    console.error(\"添加任务失败:\", error);\n    uni.showToast({\n      title: \"网络错误\",\n      icon: \"none\",\n    });\n  }\n};\n\n// 返回上一页\nconst goBack = () => {\n  uni.navigateBack();\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  min-height: 100vh;\n  background: #f5f5f5;\n  padding: 20rpx;\n}\n\n.header {\n  text-align: center;\n  margin-bottom: 40rpx;\n\n  .title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #333;\n  }\n}\n\n.form-container {\n  background: white;\n  border-radius: 20rpx;\n  padding: 40rpx;\n  margin-bottom: 40rpx;\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);\n\n  .form-item {\n    margin-bottom: 40rpx;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n\n    .form-label {\n      font-size: 28rpx;\n      color: #333;\n      display: block;\n      margin-bottom: 20rpx;\n      font-weight: 500;\n    }\n\n    .form-input,\n    .form-textarea {\n      width: 100%;\n      padding: 24rpx;\n      border: 2rpx solid #e0e0e0;\n      border-radius: 12rpx;\n      font-size: 28rpx;\n      box-sizing: border-box;\n      transition: border-color 0.3s;\n\n      &:focus {\n        border-color: #667eea;\n      }\n    }\n\n    .form-textarea {\n      height: 160rpx;\n      resize: none;\n    }\n\n    .picker-view {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 24rpx;\n      border: 2rpx solid #e0e0e0;\n      border-radius: 12rpx;\n      font-size: 28rpx;\n      background: white;\n      transition: border-color 0.3s;\n\n      &:active {\n        border-color: #667eea;\n      }\n\n      .picker-arrow {\n        color: #999;\n        font-size: 24rpx;\n      }\n    }\n  }\n}\n\n.footer {\n  display: flex;\n  gap: 20rpx;\n  padding: 0 20rpx;\n\n  .btn {\n    flex: 1;\n    height: 88rpx;\n    border-radius: 44rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 32rpx;\n    font-weight: 500;\n    transition: all 0.3s;\n\n    &.cancel-btn {\n      background: #f5f5f5;\n      color: #666;\n\n      &:active {\n        background: #e0e0e0;\n      }\n    }\n\n    &.confirm-btn {\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n\n      &:active {\n        opacity: 0.8;\n      }\n\n      &.disabled {\n        background: #ccc;\n        color: #999;\n\n        &:active {\n          opacity: 1;\n        }\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/programming/cuiji-todo-app/cuiji-todo-app/pages/add/add.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","uni","uniCloud"],"mappings":";;;;;AAoFA,UAAM,WAAWA,cAAAA,SAAS;AAAA,MACxB,OAAO;AAAA,MACP,aAAa;AAAA,MACb,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,IACX,CAAC;AAGD,UAAM,kBAAkB,CAAC,QAAQ,QAAQ,MAAM;AAC/C,UAAM,gBAAgBC,cAAAA,IAAI,CAAC;AAG3B,UAAM,mBAAmB,CAAC,MAAM;AAC9B,oBAAc,QAAQ,EAAE,OAAO;AAC/B,eAAS,WAAW,SAAS,EAAE,OAAO,KAAK,IAAI;AAAA,IACjD;AAGA,UAAM,eAAe,CAAC,MAAM;AAC1B,eAAS,UAAU,EAAE,OAAO;AAAA,IAC9B;AAGA,UAAM,aAAa,YAAY;AAC7B,UAAI,CAAC,SAAS,MAAM,QAAQ;AAC1BC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI;AACF,cAAM,SAAS,MAAMC,cAAQ,GAAC,aAAa;AAAA,UACzC,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,OAAO,SAAS;AAAA,YAChB,aAAa,SAAS;AAAA,YACtB,UAAU,SAAS;AAAA,YACnB,UAAU,SAAS;AAAA,YACnB,SAAS,SAAS;AAAA,UACnB;AAAA,QACP,CAAK;AAED,YAAI,OAAO,OAAO,SAAS,GAAG;AAC5BD,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AAGD,qBAAW,MAAM;AACfA,0BAAG,MAAC,aAAY;AAAA,UACjB,GAAE,IAAI;AAAA,QACb,OAAW;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,OAAO,OAAO,WAAW;AAAA,YAChC,MAAM;AAAA,UACd,CAAO;AAAA,QACF;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,4BAAc,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;AAGA,UAAM,SAAS,MAAM;AACnBA,oBAAG,MAAC,aAAY;AAAA,IAClB;;;;;;;;;;;;;;;;;;;;;;;;AC5JA,GAAG,WAAW,eAAe;"}