{"version":3,"file":"tasks.js","sources":["pages/tasks/tasks.vue","../../../software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGFza3MvdGFza3MudnVl"],"sourcesContent":["<template>\n  <view class=\"tasks-container\">\n    <!-- 顶部统计卡片 -->\n    <view class=\"stats-cards\">\n      <view class=\"stat-card\">\n        <text class=\"stat-number\">{{ taskStats.total }}</text>\n        <text class=\"stat-label\">总任务</text>\n      </view>\n      <view class=\"stat-card\">\n        <text class=\"stat-number\">{{ taskStats.completed }}</text>\n        <text class=\"stat-label\">已完成</text>\n      </view>\n      <view class=\"stat-card\">\n        <text class=\"stat-number\">{{ taskStats.pending }}</text>\n        <text class=\"stat-label\">待完成</text>\n      </view>\n    </view>\n\n    <!-- 搜索和筛选 -->\n    <view class=\"search-section\">\n      <u-search\n        v-model=\"searchKeyword\"\n        placeholder=\"搜索任务...\"\n        @search=\"handleSearch\"\n        @clear=\"handleClearSearch\"\n        class=\"search-input\"\n      ></u-search>\n      <u-button\n        type=\"primary\"\n        size=\"mini\"\n        @click=\"showAddTask = true\"\n        class=\"add-btn\"\n      >\n        添加任务\n      </u-button>\n    </view>\n\n    <!-- 任务列表 -->\n    <view class=\"task-list\">\n      <view v-if=\"tasks.length === 0\" class=\"empty-state\">\n        <text class=\"empty-icon\">📝</text>\n        <text class=\"empty-text\">暂无任务</text>\n        <text class=\"empty-desc\">点击上方按钮添加您的第一个任务</text>\n      </view>\n\n      <view v-else>\n        <view\n          v-for=\"task in filteredTasks\"\n          :key=\"task.id\"\n          class=\"task-item\"\n          :class=\"{ completed: task.completed }\"\n        >\n          <view class=\"task-content\">\n            <view class=\"task-header\">\n              <text class=\"task-title\">{{ task.title }}</text>\n              <view class=\"task-priority\" :class=\"task.priority\">\n                {{ getPriorityText(task.priority) }}\n              </view>\n            </view>\n\n            <text v-if=\"task.description\" class=\"task-desc\">\n              {{ task.description }}\n            </text>\n\n            <view class=\"task-meta\">\n              <text v-if=\"task.dueDate\" class=\"task-due\">\n                📅 {{ formatDate(task.dueDate) }}\n              </text>\n              <text class=\"task-category\">{{ task.category }}</text>\n            </view>\n          </view>\n\n          <view class=\"task-actions\">\n            <u-button\n              type=\"primary\"\n              size=\"mini\"\n              @click=\"toggleTaskComplete(task.id)\"\n            >\n              {{ task.completed ? \"未完成\" : \"完成\" }}\n            </u-button>\n            <u-button type=\"error\" size=\"mini\" @click=\"deleteTask(task.id)\">\n              删除\n            </u-button>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 添加任务弹窗 -->\n    <u-popup v-model=\"showAddTask\" mode=\"bottom\" height=\"80%\">\n      <view class=\"add-task-popup\">\n        <view class=\"popup-header\">\n          <text class=\"popup-title\">添加任务</text>\n          <u-button type=\"text\" @click=\"showAddTask = false\" class=\"close-btn\">\n            ✕\n          </u-button>\n        </view>\n\n        <view class=\"popup-content\">\n          <u-form :model=\"newTask\" label-position=\"top\">\n            <u-form-item label=\"任务标题\">\n              <u-input\n                v-model=\"newTask.title\"\n                placeholder=\"请输入任务标题\"\n                maxlength=\"50\"\n              ></u-input>\n            </u-form-item>\n\n            <u-form-item label=\"任务描述\">\n              <u-textarea\n                v-model=\"newTask.description\"\n                placeholder=\"请输入任务描述（可选）\"\n                maxlength=\"200\"\n                :auto-height=\"true\"\n              ></u-textarea>\n            </u-form-item>\n\n            <u-form-item label=\"优先级\">\n              <u-select\n                v-model=\"newTask.priority\"\n                :options=\"priorityOptions\"\n                placeholder=\"选择优先级\"\n              ></u-select>\n            </u-form-item>\n\n            <u-form-item label=\"截止日期\">\n              <u-datetime-picker\n                v-model=\"newTask.dueDate\"\n                mode=\"datetime\"\n                placeholder=\"选择截止日期（可选）\"\n              ></u-datetime-picker>\n            </u-form-item>\n\n            <u-form-item label=\"分类\">\n              <u-input\n                v-model=\"newTask.category\"\n                placeholder=\"输入分类（可选）\"\n                maxlength=\"20\"\n              ></u-input>\n            </u-form-item>\n          </u-form>\n        </view>\n\n        <view class=\"popup-actions\">\n          <u-button @click=\"showAddTask = false\">取消</u-button>\n          <u-button type=\"primary\" @click=\"addTask\">保存</u-button>\n        </view>\n      </view>\n    </u-popup>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, computed, onMounted } from \"vue\";\n\n// 响应式数据\nconst searchKeyword = ref(\"\");\nconst showAddTask = ref(false);\nconst tasks = ref([\n  {\n    id: 1,\n    title: \"完成项目文档\",\n    description: \"编写API文档和用户手册\",\n    completed: false,\n    priority: \"high\",\n    dueDate: \"2024-01-30\",\n    category: \"工作\",\n    createTime: new Date(),\n  },\n  {\n    id: 2,\n    title: \"购买生活用品\",\n    description: \"去超市购买日用品\",\n    completed: true,\n    priority: \"medium\",\n    dueDate: \"2024-01-28\",\n    category: \"生活\",\n    createTime: new Date(),\n  },\n]);\n\n// 新任务表单\nconst newTask = reactive({\n  title: \"\",\n  description: \"\",\n  priority: \"medium\",\n  dueDate: \"\",\n  category: \"\",\n});\n\n// 优先级选项\nconst priorityOptions = [\n  { label: \"低\", value: \"low\" },\n  { label: \"中\", value: \"medium\" },\n  { label: \"高\", value: \"high\" },\n  { label: \"紧急\", value: \"urgent\" },\n];\n\n// 计算属性\nconst taskStats = computed(() => {\n  const total = tasks.value.length;\n  const completed = tasks.value.filter((task) => task.completed).length;\n  const pending = total - completed;\n  return { total, completed, pending };\n});\n\nconst filteredTasks = computed(() => {\n  if (!searchKeyword.value) return tasks.value;\n  return tasks.value.filter(\n    (task) =>\n      task.title.toLowerCase().includes(searchKeyword.value.toLowerCase()) ||\n      task.description.toLowerCase().includes(searchKeyword.value.toLowerCase())\n  );\n});\n\n// 方法\nconst handleSearch = () => {\n  // 搜索逻辑已在计算属性中处理\n};\n\nconst handleClearSearch = () => {\n  searchKeyword.value = \"\";\n};\n\nconst toggleTaskComplete = (taskId: number) => {\n  const task = tasks.value.find((t) => t.id === taskId);\n  if (task) {\n    task.completed = !task.completed;\n  }\n};\n\nconst deleteTask = (taskId: number) => {\n  uni.showModal({\n    title: \"确认删除\",\n    content: \"确定要删除这个任务吗？\",\n    success: (res) => {\n      if (res.confirm) {\n        tasks.value = tasks.value.filter((t) => t.id !== taskId);\n        uni.showToast({\n          title: \"删除成功\",\n          icon: \"success\",\n        });\n      }\n    },\n  });\n};\n\nconst addTask = () => {\n  if (!newTask.title.trim()) {\n    uni.showToast({\n      title: \"请输入任务标题\",\n      icon: \"none\",\n    });\n    return;\n  }\n\n  const task = {\n    id: Date.now(),\n    title: newTask.title.trim(),\n    description: newTask.description.trim(),\n    completed: false,\n    priority: newTask.priority,\n    dueDate: newTask.dueDate,\n    category: newTask.category.trim() || \"未分类\",\n    createTime: new Date(),\n  };\n\n  tasks.value.unshift(task);\n\n  // 重置表单\n  Object.assign(newTask, {\n    title: \"\",\n    description: \"\",\n    priority: \"medium\",\n    dueDate: \"\",\n    category: \"\",\n  });\n\n  showAddTask.value = false;\n  uni.showToast({\n    title: \"添加成功\",\n    icon: \"success\",\n  });\n};\n\nconst getPriorityText = (priority: string) => {\n  const map: Record<string, string> = {\n    low: \"低\",\n    medium: \"中\",\n    high: \"高\",\n    urgent: \"紧急\",\n  };\n  return map[priority] || \"中\";\n};\n\nconst formatDate = (dateStr: string) => {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(\"zh-CN\");\n};\n\nonMounted(() => {\n  uni.__f__('log','at pages/tasks/tasks.vue:302',\"任务页面加载完成\");\n\n  // 检查是否从导航栏创建任务按钮进入\n  const pages = getCurrentPages();\n  const currentPage = pages[pages.length - 1];\n  const options = currentPage.options;\n\n  if (options.action === \"create\") {\n    // 延迟显示创建任务弹窗，确保页面完全加载\n    setTimeout(() => {\n      showAddTask.value = true;\n    }, 300);\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.tasks-container {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding: 20rpx 20rpx 160rpx 20rpx; /* 底部留出导航栏空间 */\n}\n\n.stats-cards {\n  display: flex;\n  gap: 20rpx;\n  margin-bottom: 30rpx;\n\n  .stat-card {\n    flex: 1;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border-radius: 16rpx;\n    padding: 30rpx 20rpx;\n    text-align: center;\n    color: white;\n\n    .stat-number {\n      display: block;\n      font-size: 48rpx;\n      font-weight: bold;\n      margin-bottom: 10rpx;\n    }\n\n    .stat-label {\n      font-size: 24rpx;\n      opacity: 0.9;\n    }\n  }\n}\n\n.search-section {\n  display: flex;\n  gap: 20rpx;\n  margin-bottom: 30rpx;\n  align-items: center;\n\n  .search-input {\n    flex: 1;\n  }\n\n  .add-btn {\n    white-space: nowrap;\n  }\n}\n\n.task-list {\n  .empty-state {\n    text-align: center;\n    padding: 100rpx 0;\n    color: #999;\n\n    .empty-icon {\n      font-size: 80rpx;\n      display: block;\n      margin-bottom: 20rpx;\n    }\n\n    .empty-text {\n      font-size: 32rpx;\n      font-weight: bold;\n      display: block;\n      margin-bottom: 10rpx;\n    }\n\n    .empty-desc {\n      font-size: 24rpx;\n      display: block;\n    }\n  }\n\n  .task-item {\n    background: white;\n    border-radius: 16rpx;\n    padding: 30rpx;\n    margin-bottom: 20rpx;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n\n    &.completed {\n      opacity: 0.6;\n\n      .task-title {\n        text-decoration: line-through;\n      }\n    }\n\n    .task-content {\n      flex: 1;\n      margin-right: 20rpx;\n\n      .task-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 15rpx;\n\n        .task-title {\n          font-size: 32rpx;\n          font-weight: bold;\n          color: #333;\n        }\n\n        .task-priority {\n          padding: 8rpx 16rpx;\n          border-radius: 20rpx;\n          font-size: 20rpx;\n          color: white;\n\n          &.low {\n            background-color: #52c41a;\n          }\n\n          &.medium {\n            background-color: #faad14;\n          }\n\n          &.high {\n            background-color: #ff4d4f;\n          }\n\n          &.urgent {\n            background-color: #722ed1;\n          }\n        }\n      }\n\n      .task-desc {\n        font-size: 26rpx;\n        color: #666;\n        line-height: 1.5;\n        margin-bottom: 15rpx;\n        display: block;\n      }\n\n      .task-meta {\n        display: flex;\n        gap: 20rpx;\n        font-size: 22rpx;\n        color: #999;\n\n        .task-due {\n          color: #ff4d4f;\n        }\n\n        .task-category {\n          background-color: #f0f0f0;\n          padding: 4rpx 12rpx;\n          border-radius: 12rpx;\n        }\n      }\n    }\n\n    .task-actions {\n      display: flex;\n      flex-direction: column;\n      gap: 10rpx;\n    }\n  }\n}\n\n.add-task-popup {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .popup-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 30rpx;\n    border-bottom: 1rpx solid #eee;\n\n    .popup-title {\n      font-size: 36rpx;\n      font-weight: bold;\n    }\n\n    .close-btn {\n      font-size: 32rpx;\n    }\n  }\n\n  .popup-content {\n    flex: 1;\n    padding: 30rpx;\n    overflow-y: auto;\n  }\n\n  .popup-actions {\n    display: flex;\n    gap: 20rpx;\n    padding: 30rpx;\n    border-top: 1rpx solid #eee;\n\n    u-button {\n      flex: 1;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/programming/cuiji-todo-app/cuiji-todo-app/pages/tasks/tasks.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","computed","uni","onMounted"],"mappings":"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"}