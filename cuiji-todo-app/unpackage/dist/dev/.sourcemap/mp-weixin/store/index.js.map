{"version":3,"file":"index.js","sources":["store/index.js"],"sourcesContent":["// #ifndef VUE3\r\nimport Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nVue.use(Vuex)\r\nconst store = new Vuex.Store({\r\n// #endif\r\n\r\n// #ifdef VUE3\r\nimport { createStore } from 'vuex'\r\nconst store = createStore({\r\n// #endif\r\n\tstate: {\r\n\t\t// 用户登录状态\r\n\t\thasLogin: false,\r\n\t\tloginProvider: \"\",\r\n\t\topenid: null,\r\n\t\t\r\n\t\t// 待办事项相关状态\r\n\t\ttodos: [],\r\n\t\tfilter: 'all', // all, active, completed\r\n\t\t\r\n\t\t// 应用状态\r\n\t\ttheme: 'light' // light, dark\r\n\t},\r\n\tmutations: {\r\n\t\t// 用户登录相关\r\n\t\tlogin(state, provider) {\r\n\t\t\tstate.hasLogin = true;\r\n\t\t\tstate.loginProvider = provider;\r\n\t\t},\r\n\t\tlogout(state) {\r\n\t\t\tstate.hasLogin = false;\r\n\t\t\tstate.openid = null;\r\n\t\t},\r\n\t\tsetOpenid(state, openid) {\r\n\t\t\tstate.openid = openid;\r\n\t\t},\r\n\t\t\r\n\t\t// 待办事项相关\r\n\t\taddTodo(state, todo) {\r\n\t\t\tstate.todos.push(todo);\r\n\t\t},\r\n\t\tupdateTodo(state, { id, updates }) {\r\n\t\t\tconst index = state.todos.findIndex(todo => todo.id === id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tstate.todos.splice(index, 1, { ...state.todos[index], ...updates });\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteTodo(state, id) {\r\n\t\t\tstate.todos = state.todos.filter(todo => todo.id !== id);\r\n\t\t},\r\n\t\tsetFilter(state, filter) {\r\n\t\t\tstate.filter = filter;\r\n\t\t},\r\n\t\tclearCompleted(state) {\r\n\t\t\tstate.todos = state.todos.filter(todo => !todo.completed);\r\n\t\t},\r\n\t\t\r\n\t\t// 主题切换\r\n\t\tsetTheme(state, theme) {\r\n\t\t\tstate.theme = theme;\r\n\t\t}\r\n\t},\r\n\tgetters: {\r\n\t\t// 过滤后的待办事项\r\n\t\tfilteredTodos(state) {\r\n\t\t\tswitch (state.filter) {\r\n\t\t\t\tcase 'active':\r\n\t\t\t\t\treturn state.todos.filter(todo => !todo.completed);\r\n\t\t\t\tcase 'completed':\r\n\t\t\t\t\treturn state.todos.filter(todo => todo.completed);\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn state.todos;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 统计信息\r\n\t\ttodoStats(state) {\r\n\t\t\tconst total = state.todos.length;\r\n\t\t\tconst completed = state.todos.filter(todo => todo.completed).length;\r\n\t\t\tconst active = total - completed;\r\n\t\t\treturn { total, completed, active };\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\t// 异步获取用户openid\r\n\t\tgetUserOpenId: async function({ commit, state }) {\r\n\t\t\treturn await new Promise((resolve, reject) => {\r\n\t\t\t\tif (state.openid) {\r\n\t\t\t\t\tresolve(state.openid);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tsuccess: (data) => {\r\n\t\t\t\t\t\t\tcommit('login');\r\n\t\t\t\t\t\t\t// 这里应该调用真实的API获取openid\r\n\t\t\t\t\t\t\tconst openid = 'mock_openid_' + Date.now();\r\n\t\t\t\t\t\t\tcommit('setOpenid', openid);\r\n\t\t\t\t\t\t\tresolve(openid);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.log('登录失败', err);\r\n\t\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport default store"],"names":["createStore","uni"],"mappings":";;AASK,MAAC,QAAQA,cAAAA,YAAY;AAAA,EAEzB,OAAO;AAAA;AAAA,IAEN,UAAU;AAAA,IACV,eAAe;AAAA,IACf,QAAQ;AAAA;AAAA,IAGR,OAAO,CAAE;AAAA,IACT,QAAQ;AAAA;AAAA;AAAA,IAGR,OAAO;AAAA;AAAA,EACP;AAAA,EACD,WAAW;AAAA;AAAA,IAEV,MAAM,OAAO,UAAU;AACtB,YAAM,WAAW;AACjB,YAAM,gBAAgB;AAAA,IACtB;AAAA,IACD,OAAO,OAAO;AACb,YAAM,WAAW;AACjB,YAAM,SAAS;AAAA,IACf;AAAA,IACD,UAAU,OAAO,QAAQ;AACxB,YAAM,SAAS;AAAA,IACf;AAAA;AAAA,IAGD,QAAQ,OAAO,MAAM;AACpB,YAAM,MAAM,KAAK,IAAI;AAAA,IACrB;AAAA,IACD,WAAW,OAAO,EAAE,IAAI,QAAO,GAAI;AAClC,YAAM,QAAQ,MAAM,MAAM,UAAU,UAAQ,KAAK,OAAO,EAAE;AAC1D,UAAI,UAAU,IAAI;AACjB,cAAM,MAAM,OAAO,OAAO,GAAG,EAAE,GAAG,MAAM,MAAM,KAAK,GAAG,GAAG,QAAS,CAAA;AAAA,MAClE;AAAA,IACD;AAAA,IACD,WAAW,OAAO,IAAI;AACrB,YAAM,QAAQ,MAAM,MAAM,OAAO,UAAQ,KAAK,OAAO,EAAE;AAAA,IACvD;AAAA,IACD,UAAU,OAAO,QAAQ;AACxB,YAAM,SAAS;AAAA,IACf;AAAA,IACD,eAAe,OAAO;AACrB,YAAM,QAAQ,MAAM,MAAM,OAAO,UAAQ,CAAC,KAAK,SAAS;AAAA,IACxD;AAAA;AAAA,IAGD,SAAS,OAAO,OAAO;AACtB,YAAM,QAAQ;AAAA,IACd;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAER,cAAc,OAAO;AACpB,cAAQ,MAAM,QAAM;AAAA,QACnB,KAAK;AACJ,iBAAO,MAAM,MAAM,OAAO,UAAQ,CAAC,KAAK,SAAS;AAAA,QAClD,KAAK;AACJ,iBAAO,MAAM,MAAM,OAAO,UAAQ,KAAK,SAAS;AAAA,QACjD;AACC,iBAAO,MAAM;AAAA,MACd;AAAA,IACD;AAAA;AAAA,IAED,UAAU,OAAO;AAChB,YAAM,QAAQ,MAAM,MAAM;AAC1B,YAAM,YAAY,MAAM,MAAM,OAAO,UAAQ,KAAK,SAAS,EAAE;AAC7D,YAAM,SAAS,QAAQ;AACvB,aAAO,EAAE,OAAO,WAAW;IAC3B;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAER,eAAe,eAAe,EAAE,QAAQ,SAAS;AAChD,aAAO,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AAC7C,YAAI,MAAM,QAAQ;AACjB,kBAAQ,MAAM,MAAM;AAAA,QACzB,OAAW;AACNC,wBAAAA,MAAI,MAAM;AAAA,YACT,SAAS,CAAC,SAAS;AAClB,qBAAO,OAAO;AAEd,oBAAM,SAAS,iBAAiB,KAAK,IAAG;AACxC,qBAAO,aAAa,MAAM;AAC1B,sBAAQ,MAAM;AAAA,YACd;AAAA,YACD,MAAM,CAAC,QAAQ;AACdA,4BAAA,MAAA,MAAA,OAAA,yBAAY,QAAQ,GAAG;AACvB,qBAAO,GAAG;AAAA,YACV;AAAA,UACP,CAAM;AAAA,QACD;AAAA,MACL,CAAI;AAAA,IACD;AAAA,EACD;AACF,CAAC;;"}